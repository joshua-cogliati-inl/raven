<?xml version="1.0" ?>
<Simulation verbosity="debug">
  <TestInfo>
    <name>framework.test_output</name>
    <author>cogljj</author>
    <created>2013-09-24</created>
    <classesTested>OutStreams.Plot, OutStreams.Print</classesTested>
    <description>
       This test is aimed to check the OutStreams system in RAVEN (BOTH TYPE: Plot (all available plot types) and Print(all the available combination of options))
    </description>
    <revisions>
     <revision author="crisr" date="2014-04-03">new imput stile for the rom and the dummy. SVN r26236</revision>
      <revision author="alfoa" date="2014-04-10">Interactive mode for Steps + moved exec on the fly outside the modules in order to avoid unneeded slowing down. SVN r26340</revision>
      <revision author="senrs" date="2015-03-17">Scatter plot corrected</revision>
      <revision author="mandd" date="2015-04-17">conversion to Database and DataObjects</revision>
      <revision author="alfoa" date="2015-06-18">Changed Name of all DataObjects</revision>
      <revision author="maljdan" date="2015-06-22">Adding the outstream manager to the XSD and adjusting some of the input files to play nicely with it.</revision>
      <revision author="senrs" date="2015-07-08">Adding subPlot capability</revision>
      <revision author="cogljj" date="2015-10-08">Switching from RAVEN model to external model, so RELAP-7 not needed.        This is checking raven's output, so it shouldn't depend on RELAP-7.    This removes the raven c++ input files.    This updates gold files because of changing the model.</revision>
     <revision author="maljdan" date="2016-05-20">Updating the test cases to remove references to Point or History.</revision>
      <revision author="alfoa" date="2016-09-01">Close #650</revision>
      <revision author="cogljj" date="2016-10-07">Having both a color and a colormap doesn't make sense.</revision>
      <revision author="alfoa" date="2017-01-21">Adding this test description.</revision>
    </revisions>
    <requirements>R-RA-3</requirements>
  </TestInfo>
  <RunInfo>
    <WorkingDir>output_check</WorkingDir>
    <Sequence>FirstMRun,testOutstreamStep</Sequence>
    <batchSize>1</batchSize>
  </RunInfo>

  <Files>
  </Files>

  <Models>
    <ExternalModel ModuleToLoad="output_generator" name="PythonModule" subType="">
      <variables>sine,square,cosine,time,var1,var2</variables>
    </ExternalModel>
  </Models>

  <Distributions>
    <Uniform name="zeroToOne">
      <lowerBound>0.0</lowerBound>
      <upperBound>1.0</upperBound>
    </Uniform>
    <Uniform name="oneToTwo">
      <lowerBound>1.0</lowerBound>
      <upperBound>2.0</upperBound>
    </Uniform>
  </Distributions>

  <Samplers>
    <Grid name="RAVENGrid">
      <variable name="var1">
        <distribution>zeroToOne</distribution>
        <grid construction="equal" steps="7" type="CDF">0.15  0.9</grid>
      </variable>
      <variable name="var2">
        <distribution>oneToTwo</distribution>
        <grid construction="equal" steps="7" type="CDF">0.15  0.9</grid>
      </variable>
    </Grid>
  </Samplers>

  <OutStreams>
    <Plot   name="plot19" interactive="true" overwrite="false" verbosity="debug">
      <actions>
        <how>png,screen</how>
      </actions>
      <plotSettings>
        <plot>
          <type>scatter</type>
          <x>stories|Input|var1</x>
          <y>stories|Input|var2</y>
          <z>stories|Output|cosine</z>
          <colorMap>stories|Output|sine</colorMap>
          <cmap>summer</cmap>
        </plot>
        <kwargs>
        </kwargs>
        <xlabel>var1</xlabel>
        <ylabel>var2</ylabel>
        <zlabel>cosine</zlabel>
      </plotSettings>
    </Plot>
  </OutStreams>

  <Steps>
    <MultiRun name="FirstMRun" pauseAtEnd="false">
      <Input class="DataObjects" type="PointSet">inputHolder</Input>
      <Model class="Models" type="ExternalModel">PythonModule</Model>
      <Sampler class="Samplers" type="Grid">RAVENGrid</Sampler>
      <Output class="Databases" type="HDF5">testOutputDatabase</Output>
      <Output class="DataObjects" type="HistorySet">stories</Output>
      <Output class="DataObjects" type="PointSet">PointSets</Output>
    </MultiRun>
    <IOStep name="testOutstreamStep" pauseAtEnd="true">
      <Input class="DataObjects" type="HistorySet">stories</Input>
      <Input class="DataObjects" type="PointSet">PointSets</Input>
      <Output class="OutStreams" type="Plot">plot19</Output>
    </IOStep>
  </Steps>

  <Databases>
    <HDF5 name="testOutputDatabase" readMode="overwrite"/>
  </Databases>

  <DataObjects>
    <PointSet name="inputHolder">
      <Input>var1, var2</Input>
      <Output>OutputPlaceHolder</Output>
    </PointSet>
    <PointSet name="PointSets">
      <Input>var1,var2</Input>
      <Output>time,
                sine,
                square, cosine
        </Output>
    </PointSet>
    <HistorySet name="stories">
      <Input>var1 , var2
      </Input>
      <Output>time,
                sine,
                square, cosine
        </Output>
    </HistorySet>
  </DataObjects>

</Simulation>
